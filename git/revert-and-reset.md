# 커밋 되돌리기: revert vs reset

### 작성 날짜 : 2017/11/24
### 작성자 : 박성환

<br>
<br>

# 0. 커밋을 되돌린다는건

우리는 코드를 짜며 필요할 때마다 commit(이하 커밋)을 한다.  
커밋은 우리가 내킬 때마다 하는 것이 아니며 기능별로 독립된 의미가 있는 커밋을 해야 할 것이다.  
커밋 도중 사람이기 때문에 만든 변화를 HEAD까지 옮기며 버리고 싶을 수도 있고,  
또는 이전 커밋을 삭제하고 싶을 수도 있다.  

이럴 때 도움을 주는 것이 revert와 reset이다.  
이들에 대해 각각 알아보고 둘의 차이까지 조망해보도록 하자.

<br>
<br>
<br>


## 1. revert
`revert`는 **인자로 주어진 커밋을 취소하고 변경 내용까지도 되돌리는 명령어이다.**  

우리가 `\#1 -> \#2 -> \#3`의 순서로 커밋을 만들었다고 화자.

이때 HEAD는 \#3에 와 있다. 지금 이 커밋이 맘에 안 든다고 하자.
이때 revert를 사용하면 코드는  

"""bash
git revert HEAD
"""

이다. 이러면 이 \#3의 내용은 취소된다.  
그리고 새 커밋이 생기는데, 이 커밋은 \#3을 revert한다는 메시지를 자동 포함하는데  
커밋이 자동으로 바로 생기며 commit 로그에 \#3을 revert했다는 메시지를 보여준다.
다시 말해 해당 커밋을 지우면 그 커밋은 사라지고 그 내용을 담은 내 커밋을 만든다.
한 번에 커밋 인자를 계속해서 넘길 수 있으며(overloading) 한 번에 연속된 커밋을 취소할 수도 있다.


"""bash
git revert -n HEAD~5..HEAD~1
"""

이 코드는 HEAD에서 6번째 커밋부터 HEAD 바로 뒤 커밋까지 되돌린다는 의미이다.  
또한 `-n`은 커밋을 바로 만들지 않는 옵션이다.  

HEAD부터 HEAD에서 5번째 커밋이 아니냐고 질문할 수 있는데  
프로그래밍 배열이 0에서 index가 시작한다는 말로 정리할 수 있겠다.


<br>
<br>


## 2. reset
`reset`은 **커밋을 취소하되 해당 커밋에서 변경된 내용은 그대로 두는 형태의 커밋 취소이다.**  
아까처럼 3개의 커밋이 있는 상태라고 하고 reset을 사용한다고 해보자.  

"""bash
git revert HEAD
"""

\#3은 취소되었을 것이다. 이때 특징은 \#3에서 작업한 내용이 사라지지 않고 그대로 남는다는 것이다.  
이것도 이것 나름의 매력이 있다.  

마지막으로 이 둘의 차이를 확인하고 마무리한다.

<br>
<br>


## 3. revert와 reset의 차이
그러면, 커밋을 취소해야 하는 상황에서 revert와 reset 중 어떤 것을 사용하면 될까??  
이 둘의 차이는 다음과 같다.  

> **revert는 커밋을 취소하며 해당 커밋의 내용을 이전 상태로 되돌리고**,
> 기본 옵션으로 커밋을 새로 만든다.  

> **reset은 반면 커밋을 취소하며 해당 커밋의 내용을 그대로 두며**
> modified의 상태 등으로 변화를 만들지 않는다.
>
> 난 이 둘의 차이를 쉽게 위우고 싶어 나름의 방법을 썼다.
> revert의 'v' -> 'roll vack', reset의 's' -> 'stay'
> 즉 revert는 전 내용으로 되돌리며(roll vack), reset은 전 내용을 그대로 둔다.(stay)
> ~정말 어썸만 암기 방법이 아닌지? 감탄은 자유다.~

<br>
<Br>

깃 커밋을 삭제하는 두 방법을 살펴보았다.  
본인도 이 방법을 잘 몰라 필요를 느낌에도 대충 넘어갔는데 2017/11/23에 있던 [qbinson](https://github.com/Gyubin)의  
강의 덕분에 광명 찾았다. 모르면 자수해라. 그리고 알고 광명을 찾자.  

노력하면 지식은 연쇄적 통찰을 부여한다. 그렇게 될 수 있도록 노력하자 모두.
